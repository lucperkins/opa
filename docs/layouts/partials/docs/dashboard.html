{{ $home       := site.BaseURL }}
{{ $docsHome   := .CurrentSection }}
{{ $allDocs    := where site.RegularPages "Section" "docs" }}
{{ $docs       := where $allDocs ".Params.tutorial" "ne" true }}
{{ $tutorials  := where $allDocs ".Params.tutorial" true }}
{{ $logo       := site.Params.logos.sidebar | relURL }}
{{ $pageUrl    := .URL }}
{{ $isDocsHome := eq .URL $docsHome.URL }}
<div class="dashboard">
  <div class="dashboard-panel left has-background-white-bis is-hidden-mobile">
    <div class="dashboard-panel-header">
      <div class="dashboard-panel-header-logo">
        <a href="{{ $home }}">
          <img src="{{ $logo }}">
        </a>
      </div>
    </div>

    <div class="dashboard-panel-content is-scrollable">
      <div class="docs-nav">
        <span class="docs-nav-title">
          Documentation
        </span>

        <a class="docs-nav-item{{ if $isDocsHome }} is-active{{ end }}" href="{{ $docsHome.URL }}">
          {{ $docsHome.Name }}
        </a>

        {{ if $isDocsHome }}
        <div class="toc">
          {{ .TableOfContents }}
        </div>
        {{ end }}

        {{ range $docs }}
        {{ $isThisPage    := eq .URL $pageUrl }}
        <a class="docs-nav-item{{ if $isThisPage }} is-active{{ end }}" href="{{ .URL }}">
          {{ .Title }}
        </a>
        {{ if $isThisPage }}
        <div class="toc">
          {{ .TableOfContents }}
        </div>
        {{ end }}
        {{ end }}

        <hr class="docs-nav-hr" />

        <span class="docs-nav-title">
          Tutorials
        </span>

        {{ range $tutorials }}
        {{ $isThisPage := eq .URL $pageUrl }}
        <a class="docs-nav-item{{ if $isThisPage }} is-active{{ end }}" href="{{ .URL }}">
          {{ .Title }}
        </a>
        {{ if $isThisPage }}
        <div class="toc">
          {{ .TableOfContents }}
        </div>
        {{ end }}
        {{ end }}
      </div>
    </div>
  </div>

  <div class="dashboard-main is-scrollable">
    {{ partial "docs/navbar.html" . }}
    {{ partial "docs/hero.html" . }}
    {{ partial "docs/article.html" . }}
  </div>
</div>